{
  "version": 3,
  "sources": ["../../@cloudscape-design/components/internal/components/focus-lock/internal/components/focus-lock/index.tsx", "../../@cloudscape-design/components/internal/components/tab-trap/internal/components/tab-trap/index.tsx", "../../@cloudscape-design/components/internal/components/focus-lock/internal/components/focus-lock/utils.ts"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\n\nimport TabTrap from '../tab-trap/index';\nimport { getFirstFocusable, getLastFocusable } from './utils';\n\nexport interface FocusLockProps {\n  className?: string;\n  disabled?: boolean;\n  autoFocus?: boolean;\n  restoreFocus?: boolean;\n  children: React.ReactNode;\n}\n\nexport interface FocusLockRef {\n  /**\n   * Focuses the first element in the component.\n   */\n  focusFirst(): void;\n}\n\nfunction FocusLock(\n  { className, disabled, autoFocus, restoreFocus, children }: FocusLockProps,\n  ref: React.Ref<FocusLockRef>\n) {\n  const returnFocusToRef = useRef<HTMLOrSVGElement | null>(null);\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  const focusFirst = () => {\n    if (containerRef.current) {\n      getFirstFocusable(containerRef.current)?.focus();\n    }\n  };\n\n  const focusLast = () => {\n    if (containerRef.current) {\n      getLastFocusable(containerRef.current)?.focus();\n    }\n  };\n\n  // Captures focus when `autoFocus` is set, and the component is mounted or\n  // `disabled` changes from true to false.\n  useEffect(() => {\n    if (autoFocus && !disabled) {\n      returnFocusToRef.current = document.activeElement as HTMLOrSVGElement | null;\n      focusFirst();\n    }\n  }, [autoFocus, disabled]);\n\n  // Restore focus if `restoreFocus` is set, and `disabled` changes from false\n  // to true.\n  const [previouslyDisabled, setPreviouslyDisabled] = useState(!!disabled);\n  useEffect(() => {\n    if (previouslyDisabled !== !!disabled) {\n      setPreviouslyDisabled(!!disabled);\n      if (restoreFocus && disabled) {\n        returnFocusToRef.current?.focus();\n        returnFocusToRef.current = null;\n      }\n    }\n  }, [previouslyDisabled, disabled, restoreFocus]);\n\n  // Restore focus if `restoreFocus` is set and the component is unmounted.\n  // Using a callback ref for this is safer than using useEffect cleanups.\n  const restoreFocusHandler = useCallback(\n    (elem: HTMLDivElement | null) => {\n      if (elem === null && restoreFocus) {\n        returnFocusToRef.current?.focus();\n        returnFocusToRef.current = null;\n      }\n    },\n    [restoreFocus]\n  );\n\n  useImperativeHandle(ref, () => ({ focusFirst }));\n  const mergedRef = useMergeRefs(containerRef, restoreFocusHandler);\n\n  return (\n    <>\n      <TabTrap disabled={disabled} focusNextCallback={focusLast} />\n      <div className={className} ref={mergedRef}>\n        {children}\n      </div>\n      <TabTrap disabled={disabled} focusNextCallback={focusFirst} />\n    </>\n  );\n}\n\nexport default React.forwardRef(FocusLock);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\n\nexport interface TabTrapProps {\n  focusNextCallback: (event: React.FocusEvent) => void;\n  disabled?: boolean;\n}\n\n/**\n * This component handles focus-forwarding when using keyboard tab navigation.\n * When the user focuses this component, the `focusNextCallback` function is called\n * which can forward the focus to another element.\n */\nexport default function TabTrap({ focusNextCallback, disabled = false }: TabTrapProps) {\n  return <div tabIndex={disabled ? -1 : 0} onFocus={focusNextCallback} />;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\n// Credits to\n// https://github.com/theKashey/focus-lock/blob/33f8b4bd9675d2605b15e2e4015b77fe35fbd6d0/src/utils/tabbables.ts\nconst tabbables = [\n  'button:enabled',\n  'select:enabled',\n  'textarea:enabled',\n  'input:enabled',\n\n  'a[href]',\n  'area[href]',\n\n  'summary',\n  'iframe',\n  'object',\n  'embed',\n\n  'audio[controls]',\n  'video[controls]',\n\n  '[tabindex]',\n  '[contenteditable]',\n  '[autofocus]',\n].join(',');\n\nexport function getFocusables(container: HTMLElement): HTMLElement[] {\n  return Array.prototype.slice\n    .call(container.querySelectorAll(tabbables))\n    .filter((element: HTMLElement) => element.tabIndex !== -1);\n}\n\nexport function getFirstFocusable(container: HTMLElement): null | HTMLElement {\n  const focusables = getFocusables(container);\n  return focusables[0] ?? null;\n}\n\nexport function getLastFocusable(container: HTMLElement): null | HTMLElement {\n  const focusables = getFocusables(container);\n  return focusables[focusables.length - 1] ?? null;\n}\n"],
  "mappings": ";;;;;;;;;AAEA,IAAAA,gBAAqF;;;ACArF,mBAAkB;AAYJ,SAAP,QAAyB,EAAE,mBAAmB,WAAW,MAAK,GAAgB;AACnF,SAAO,aAAAC,QAAA,cAAA,OAAA,EAAK,UAAU,WAAW,KAAK,GAAG,SAAS,kBAAiB,CAAA;AACrE;;;ACXA,IAAM,YAAY;EAChB;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA,KAAK,GAAG;AAEJ,SAAU,cAAc,WAAsB;AAClD,SAAO,MAAM,UAAU,MACpB,KAAK,UAAU,iBAAiB,SAAS,CAAC,EAC1C,OAAO,CAAC,YAAyB,QAAQ,aAAa,EAAE;AAC7D;AAEM,SAAU,kBAAkB,WAAsB;;AACtD,QAAM,aAAa,cAAc,SAAS;AAC1C,UAAO,KAAA,WAAW,QAAE,QAAA,OAAA,SAAA,KAAI;AAC1B;AAEM,SAAU,iBAAiB,WAAsB;;AACrD,QAAM,aAAa,cAAc,SAAS;AAC1C,UAAO,KAAA,WAAW,WAAW,SAAS,QAAE,QAAA,OAAA,SAAA,KAAI;AAC9C;;;AFlBA,SAAS,UACP,EAAE,WAAW,UAAU,WAAW,cAAc,SAAQ,GACxD,KAA4B;AAE5B,QAAM,uBAAmB,sBAAgC,IAAI;AAC7D,QAAM,mBAAe,sBAA8B,IAAI;AAEvD,QAAM,aAAa,MAAK;;AACtB,QAAI,aAAa,SAAS;AACxB,OAAA,KAAA,kBAAkB,aAAa,OAAO,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,MAAK;;EAElD;AAEA,QAAM,YAAY,MAAK;;AACrB,QAAI,aAAa,SAAS;AACxB,OAAA,KAAA,iBAAiB,aAAa,OAAO,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,MAAK;;EAEjD;AAIA,+BAAU,MAAK;AACb,QAAI,aAAa,CAAC,UAAU;AAC1B,uBAAiB,UAAU,SAAS;AACpC,iBAAU;;EAEd,GAAG,CAAC,WAAW,QAAQ,CAAC;AAIxB,QAAM,CAAC,oBAAoB,qBAAqB,QAAI,wBAAS,CAAC,CAAC,QAAQ;AACvE,+BAAU,MAAK;;AACb,QAAI,uBAAuB,CAAC,CAAC,UAAU;AACrC,4BAAsB,CAAC,CAAC,QAAQ;AAChC,UAAI,gBAAgB,UAAU;AAC5B,SAAA,KAAA,iBAAiB,aAAO,QAAA,OAAA,SAAA,SAAA,GAAE,MAAK;AAC/B,yBAAiB,UAAU;;;EAGjC,GAAG,CAAC,oBAAoB,UAAU,YAAY,CAAC;AAI/C,QAAM,0BAAsB,2BAC1B,CAAC,SAA+B;;AAC9B,QAAI,SAAS,QAAQ,cAAc;AACjC,OAAA,KAAA,iBAAiB,aAAO,QAAA,OAAA,SAAA,SAAA,GAAE,MAAK;AAC/B,uBAAiB,UAAU;;EAE/B,GACA,CAAC,YAAY,CAAC;AAGhB,yCAAoB,KAAK,OAAO,EAAE,WAAU,EAAG;AAC/C,QAAM,YAAY,aAAa,cAAc,mBAAmB;AAEhE,SACE,cAAAC,QAAA;IAAA,cAAAA,QAAA;IAAA;IACE,cAAAA,QAAA,cAAC,SAAO,EAAC,UAAoB,mBAAmB,UAAS,CAAA;IACzD,cAAAA,QAAA,cAAA,OAAA,EAAK,WAAsB,KAAK,UAAS,GACtC,QAAQ;IAEX,cAAAA,QAAA,cAAC,SAAO,EAAC,UAAoB,mBAAmB,WAAU,CAAA;EAAI;AAGpE;AAEA,IAAA,qBAAe,cAAAA,QAAM,WAAW,SAAS;",
  "names": ["import_react", "React", "React"]
}
