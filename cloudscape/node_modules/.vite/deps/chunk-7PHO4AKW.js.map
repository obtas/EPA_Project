{
  "version": 3,
  "sources": ["../../@cloudscape-design/components/form-field/form-field/internal.tsx", "../../@cloudscape-design/components/form-field/form-field/util.ts", "../../@cloudscape-design/components/form-field/styles.css.js"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\nimport clsx from 'clsx';\n\nimport { getBaseProps } from '../internal/base-component';\nimport { FormFieldContext, useFormFieldContext } from '../internal/context/form-field-context';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\n\nimport InternalGrid from '../grid/internal';\nimport InternalIcon from '../icon/internal';\nimport { getAriaDescribedBy, getGridDefinition, getSlotIds } from './util';\n\nimport styles from './styles.css.js';\nimport { InternalFormFieldProps } from './interfaces';\nimport { joinStrings } from '../internal/utils/strings';\nimport { useInternalI18n } from '../internal/i18n/context';\nimport { InfoLinkLabelContext } from '../internal/context/info-link-label-context';\n\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useFunnel, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport {\n  DATA_ATTR_FIELD_ERROR,\n  DATA_ATTR_FIELD_LABEL,\n  getFieldSlotSeletor,\n  getNameFromSelector,\n  getSubStepAllSelector,\n} from '../internal/analytics/selectors';\n\ninterface FormFieldErrorProps {\n  id?: string;\n  children?: React.ReactNode;\n  errorIconAriaLabel?: string;\n}\n\nexport function FormFieldError({ id, children, errorIconAriaLabel }: FormFieldErrorProps) {\n  const i18n = useInternalI18n('form-field');\n\n  return (\n    <div id={id} className={styles.error}>\n      <div className={styles['error-icon-shake-wrapper']}>\n        <div\n          role=\"img\"\n          aria-label={i18n('i18nStrings.errorIconAriaLabel', errorIconAriaLabel)}\n          className={styles['error-icon-scale-wrapper']}\n        >\n          <InternalIcon name=\"status-warning\" size=\"small\" />\n        </div>\n      </div>\n      <span className={styles.error__message}>{children}</span>\n    </div>\n  );\n}\n\nexport function ConstraintText({\n  id,\n  hasError,\n  children,\n}: {\n  id?: string;\n  hasError: boolean;\n  children: React.ReactNode;\n}) {\n  return (\n    <div id={id} className={clsx(styles.constraint, hasError && styles['constraint-has-error'])}>\n      {children}\n    </div>\n  );\n}\n\nexport default function InternalFormField({\n  controlId,\n  stretch = false,\n  label,\n  info,\n  i18nStrings,\n  children,\n  secondaryControl,\n  description,\n  constraintText,\n  errorText,\n  __hideLabel,\n  __internalRootRef = null,\n  __disableGutters = false,\n  ...rest\n}: InternalFormFieldProps) {\n  const baseProps = getBaseProps(rest);\n  const isRefresh = useVisualRefresh();\n\n  const instanceUniqueId = useUniqueId('formField');\n  const generatedControlId = controlId || instanceUniqueId;\n  const formFieldId = controlId || generatedControlId;\n\n  const { funnelInteractionId, submissionAttempt, funnelState, errorCount } = useFunnel();\n\n  const { stepNumber, stepNameSelector, subStepSelector, subStepNameSelector } = useFunnelSubStep();\n\n  const slotIds = getSlotIds(formFieldId, label, description, constraintText, errorText);\n\n  const ariaDescribedBy = getAriaDescribedBy(slotIds);\n\n  const gridDefinition = getGridDefinition(stretch, !!secondaryControl, isRefresh);\n\n  const {\n    ariaLabelledby: parentAriaLabelledby,\n    ariaDescribedby: parentAriaDescribedby,\n    invalid: parentInvalid,\n  } = useFormFieldContext({});\n\n  const contextValuesWithoutControlId = {\n    ariaLabelledby: joinStrings(parentAriaLabelledby, slotIds.label) || undefined,\n    ariaDescribedby: joinStrings(parentAriaDescribedby, ariaDescribedBy) || undefined,\n    invalid: !!errorText || !!parentInvalid,\n  };\n\n  const analyticsAttributes = {\n    [DATA_ATTR_FIELD_LABEL]: slotIds.label ? getFieldSlotSeletor(slotIds.label) : undefined,\n    [DATA_ATTR_FIELD_ERROR]: slotIds.error ? getFieldSlotSeletor(slotIds.error) : undefined,\n  };\n\n  useEffect(() => {\n    if (funnelInteractionId && errorText && funnelState.current !== 'complete') {\n      const stepName = getNameFromSelector(stepNameSelector);\n      const subStepName = getNameFromSelector(subStepNameSelector);\n\n      errorCount.current++;\n\n      FunnelMetrics.funnelSubStepError({\n        funnelInteractionId,\n        subStepSelector,\n        subStepName,\n        subStepNameSelector,\n        stepNumber,\n        stepName,\n        stepNameSelector,\n        fieldErrorSelector: getFieldSlotSeletor(slotIds.error),\n        fieldLabelSelector: getFieldSlotSeletor(slotIds.label),\n        subStepAllSelector: getSubStepAllSelector(),\n      });\n\n      return () => {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        errorCount.current--;\n      };\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [funnelInteractionId, errorText, submissionAttempt, errorCount]);\n\n  return (\n    <div\n      {...baseProps}\n      className={clsx(baseProps.className, styles.root)}\n      ref={__internalRootRef}\n      {...analyticsAttributes}\n    >\n      <div className={clsx(__hideLabel && styles['visually-hidden'])}>\n        {label && (\n          <label className={styles.label} id={slotIds.label} htmlFor={generatedControlId}>\n            {label}\n          </label>\n        )}\n        <InfoLinkLabelContext.Provider value={slotIds.label}>\n          {!__hideLabel && info && <span className={styles.info}>{info}</span>}\n        </InfoLinkLabelContext.Provider>\n      </div>\n\n      {description && (\n        <div className={styles.description} id={slotIds.description}>\n          {description}\n        </div>\n      )}\n\n      <div className={clsx(styles.controls, __hideLabel && styles['label-hidden'])}>\n        <InternalGrid gridDefinition={gridDefinition} disableGutters={__disableGutters}>\n          <FormFieldContext.Provider\n            value={{\n              controlId: generatedControlId,\n              ...contextValuesWithoutControlId,\n            }}\n          >\n            {children && <div className={styles.control}>{children}</div>}\n          </FormFieldContext.Provider>\n\n          {secondaryControl && (\n            <FormFieldContext.Provider value={contextValuesWithoutControlId}>\n              <div className={styles['secondary-control']}>{secondaryControl}</div>\n            </FormFieldContext.Provider>\n          )}\n        </InternalGrid>\n      </div>\n\n      {(constraintText || errorText) && (\n        <div className={styles.hints}>\n          {errorText && (\n            <FormFieldError id={slotIds.error} errorIconAriaLabel={i18nStrings?.errorIconAriaLabel}>\n              {errorText}\n            </FormFieldError>\n          )}\n          {constraintText && (\n            <ConstraintText id={slotIds.constraint} hasError={!!errorText}>\n              {constraintText}\n            </ConstraintText>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { GridProps } from '../grid/interfaces';\n\ninterface FormFieldIds {\n  label?: string;\n  description?: string;\n  constraint?: string;\n  error?: string;\n}\n\nfunction makeSlotId(prop: React.ReactNode, formFieldId: string, propName: string): string | undefined {\n  if (!prop) {\n    return undefined;\n  }\n\n  return `${formFieldId}-${propName}`;\n}\n\nexport function getSlotIds(\n  formFieldId: string,\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n  constraintText?: React.ReactNode,\n  errorText?: React.ReactNode\n) {\n  const ids: FormFieldIds = {\n    label: makeSlotId(label, formFieldId, 'label'),\n    description: makeSlotId(description, formFieldId, 'description'),\n    constraint: makeSlotId(constraintText, formFieldId, 'constraint'),\n    error: makeSlotId(errorText, formFieldId, 'error'),\n  };\n\n  return ids;\n}\n\nexport function getAriaDescribedBy({ error, description, constraint }: FormFieldIds) {\n  const describedByAttributes = [error, description, constraint].filter(e => !!e);\n  const describedBy = describedByAttributes.length ? describedByAttributes.join(' ') : undefined;\n  return describedBy;\n}\n\nexport function getGridDefinition(stretch: boolean, secondaryControlPresent: boolean, isRefresh: boolean) {\n  let columns: Array<{ colspan: GridProps.BreakpointMapping | number }>;\n\n  if (stretch) {\n    columns = [{ colspan: 12 }, { colspan: 12 }];\n  } else if (isRefresh) {\n    columns = [{ colspan: { default: 12, xs: 8 } }, { colspan: { default: 12, xs: 4 } }];\n  } else {\n    columns = [{ colspan: { default: 12, xs: 9 } }, { colspan: { default: 12, xs: 3 } }];\n  }\n\n  if (!secondaryControlPresent) {\n    return [columns[0]];\n  }\n\n  return columns;\n}\n", "\n    import './styles.scoped.css';\n    export default {\n  \"error-icon-shake-wrapper\": \"awsui_error-icon-shake-wrapper_14mhv_a78yj_97\",\n  \"awsui-motion-shake-horizontally\": \"awsui_awsui-motion-shake-horizontally_14mhv_a78yj_1\",\n  \"error-icon-scale-wrapper\": \"awsui_error-icon-scale-wrapper_14mhv_a78yj_124\",\n  \"awsui-motion-scale-popup\": \"awsui_awsui-motion-scale-popup_14mhv_a78yj_1\",\n  \"error\": \"awsui_error_14mhv_a78yj_97\",\n  \"awsui-motion-fade-in-0\": \"awsui_awsui-motion-fade-in-0_14mhv_a78yj_1\",\n  \"root\": \"awsui_root_14mhv_a78yj_168\",\n  \"label\": \"awsui_label_14mhv_a78yj_182\",\n  \"info\": \"awsui_info_14mhv_a78yj_195\",\n  \"description\": \"awsui_description_14mhv_a78yj_200\",\n  \"constraint\": \"awsui_constraint_14mhv_a78yj_201\",\n  \"hints\": \"awsui_hints_14mhv_a78yj_208\",\n  \"constraint-has-error\": \"awsui_constraint-has-error_14mhv_a78yj_209\",\n  \"secondary-control\": \"awsui_secondary-control_14mhv_a78yj_213\",\n  \"controls\": \"awsui_controls_14mhv_a78yj_217\",\n  \"label-hidden\": \"awsui_label-hidden_14mhv_a78yj_217\",\n  \"control\": \"awsui_control_14mhv_a78yj_217\",\n  \"error__message\": \"awsui_error__message_14mhv_a78yj_236\",\n  \"visually-hidden\": \"awsui_visually-hidden_14mhv_a78yj_240\"\n};\n  "],
  "mappings": "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",
  "names": ["React", "internal_default"]
}
