{
  "version": 3,
  "sources": ["../../@cloudscape-design/components/modal/modal/internal.tsx", "../../@cloudscape-design/components/modal/styles.css.js", "../../@cloudscape-design/components/modal/modal/body-scroll.ts", "../../@cloudscape-design/components/internal/hooks/use-intersection-observer/internal/hooks/use-intersection-observer/index.ts"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport clsx from 'clsx';\n\nimport { getBaseProps } from '../internal/base-component';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { KeyCode } from '../internal/keycode';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { InternalButton } from '../button/internal';\nimport InternalHeader from '../header/internal';\nimport Portal from '../internal/components/portal';\nimport { useContainerBreakpoints, useContainerQuery } from '../internal/hooks/container-queries';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { FormFieldContext } from '../internal/context/form-field-context';\n\nimport { disableBodyScrolling, enableBodyScrolling } from './body-scroll';\nimport { ModalProps } from './interfaces';\nimport styles from './styles.css.js';\nimport { SomeRequired } from '../internal/types';\nimport FocusLock from '../internal/components/focus-lock';\nimport { useInternalI18n } from '../internal/i18n/context';\nimport { useIntersectionObserver } from '../internal/hooks/use-intersection-observer';\n\ntype InternalModalProps = SomeRequired<ModalProps, 'size'> & InternalBaseComponentProps;\n\nexport default function InternalModal({ modalRoot, ...rest }: InternalModalProps) {\n  return (\n    <Portal container={modalRoot}>\n      <InnerModal {...rest} />\n    </Portal>\n  );\n}\n\n// Separate component to prevent the Portal from getting in the way of refs, as it needs extra cycles to render the inner components.\n// useContainerQuery needs its targeted element to exist on the first render in order to work properly.\nfunction InnerModal({\n  size,\n  visible,\n  header,\n  children,\n  footer,\n  disableContentPaddings,\n  onDismiss,\n  __internalRootRef = null,\n  ...rest\n}: InternalModalProps) {\n  const instanceUniqueId = useUniqueId();\n  const headerId = `${rest.id || instanceUniqueId}-header`;\n  const lastMouseDownElementRef = useRef<HTMLElement | null>(null);\n  const [breakpoint, breakpointsRef] = useContainerBreakpoints(['xs']);\n\n  const i18n = useInternalI18n('modal');\n  const closeAriaLabel = i18n('closeAriaLabel', rest.closeAriaLabel);\n\n  const refObject = useRef<HTMLDivElement>(null);\n  const mergedRef = useMergeRefs(breakpointsRef, refObject, __internalRootRef);\n\n  const isRefresh = useVisualRefresh();\n\n  const baseProps = getBaseProps(rest);\n\n  // enable body scroll and restore focus if unmounting while visible\n  useEffect(() => {\n    return () => {\n      enableBodyScrolling();\n    };\n  }, []);\n\n  // enable / disable body scroll\n  useEffect(() => {\n    if (visible) {\n      disableBodyScrolling();\n    } else {\n      enableBodyScrolling();\n    }\n  }, [visible]);\n\n  // Because we hide the element with styles (and not actually detach it from DOM), we need to scroll to top\n  useEffect(() => {\n    if (visible && refObject.current) {\n      refObject.current.scrollTop = 0;\n    }\n  }, [visible]);\n\n  const dismiss = (reason: string) => fireNonCancelableEvent(onDismiss, { reason });\n\n  const onOverlayMouseDown = (event: React.MouseEvent) => {\n    lastMouseDownElementRef.current = event.target as HTMLElement;\n  };\n  const onOverlayClick = (event: React.MouseEvent) => {\n    const overlay = refObject.current;\n    const lastClicked = lastMouseDownElementRef.current;\n\n    if (event.target === overlay && lastClicked === overlay) {\n      dismiss('overlay');\n    }\n  };\n  const onCloseButtonClick = () => dismiss('closeButton');\n  const escKeyHandler = (event: React.KeyboardEvent) => {\n    if (event.keyCode === KeyCode.escape) {\n      dismiss('keyboard');\n    }\n  };\n\n  // We use an empty div element at the end of the content slot as a sentinel\n  // to detect when the user has scrolled to the bottom.\n  const { ref: stickySentinelRef, isIntersecting: footerStuck } = useIntersectionObserver();\n\n  // Add extra scroll padding to account for the height of the sticky footer,\n  // to prevent it from covering focused elements.\n  const [footerHeight, footerRef] = useContainerQuery(rect => rect.borderBoxHeight);\n\n  return (\n    <FormFieldContext.Provider value={{}}>\n      <div\n        {...baseProps}\n        className={clsx(styles.root, { [styles.hidden]: !visible }, baseProps.className, isRefresh && styles.refresh)}\n        role=\"dialog\"\n        aria-modal={true}\n        aria-labelledby={headerId}\n        onMouseDown={onOverlayMouseDown}\n        onClick={onOverlayClick}\n        ref={mergedRef}\n        style={footerHeight ? { scrollPaddingBottom: footerHeight } : undefined}\n      >\n        <FocusLock disabled={!visible} autoFocus={true} restoreFocus={true} className={styles['focus-lock']}>\n          <div\n            className={clsx(\n              styles.dialog,\n              styles[size],\n              styles[`breakpoint-${breakpoint}`],\n              isRefresh && styles.refresh\n            )}\n            onKeyDown={escKeyHandler}\n          >\n            <div className={styles.container}>\n              <div className={styles.header}>\n                <InternalHeader\n                  variant=\"h2\"\n                  __disableActionsWrapping={true}\n                  actions={\n                    <InternalButton\n                      ariaLabel={closeAriaLabel}\n                      className={styles['dismiss-control']}\n                      variant=\"modal-dismiss\"\n                      iconName=\"close\"\n                      formAction=\"none\"\n                      onClick={onCloseButtonClick}\n                    />\n                  }\n                >\n                  <span id={headerId} className={styles['header--text']}>\n                    {header}\n                  </span>\n                </InternalHeader>\n              </div>\n              <div className={clsx(styles.content, { [styles['no-paddings']]: disableContentPaddings })}>\n                {children}\n                <div ref={stickySentinelRef} />\n              </div>\n              {footer && (\n                <div ref={footerRef} className={clsx(styles.footer, footerStuck && styles['footer--stuck'])}>\n                  {footer}\n                </div>\n              )}\n            </div>\n          </div>\n        </FocusLock>\n      </div>\n    </FormFieldContext.Provider>\n  );\n}\n", "\n    import './styles.scoped.css';\n    export default {\n  \"dialog\": \"awsui_dialog_1d2i7_k6v6r_105\",\n  \"modal-slide-up\": \"awsui_modal-slide-up_1d2i7_k6v6r_1\",\n  \"awsui-motion-fade-in-0\": \"awsui_awsui-motion-fade-in-0_1d2i7_k6v6r_1\",\n  \"refresh\": \"awsui_refresh_1d2i7_k6v6r_128\",\n  \"awsui-motion-scale-popup\": \"awsui_awsui-motion-scale-popup_1d2i7_k6v6r_1\",\n  \"root\": \"awsui_root_1d2i7_k6v6r_161\",\n  \"awsui-motion-fade-in\": \"awsui_awsui-motion-fade-in_1d2i7_k6v6r_1\",\n  \"hidden\": \"awsui_hidden_1d2i7_k6v6r_226\",\n  \"focus-lock\": \"awsui_focus-lock_1d2i7_k6v6r_230\",\n  \"small\": \"awsui_small_1d2i7_k6v6r_248\",\n  \"medium\": \"awsui_medium_1d2i7_k6v6r_251\",\n  \"large\": \"awsui_large_1d2i7_k6v6r_254\",\n  \"max\": \"awsui_max_1d2i7_k6v6r_257\",\n  \"breakpoint-xs\": \"awsui_breakpoint-xs_1d2i7_k6v6r_257\",\n  \"container\": \"awsui_container_1d2i7_k6v6r_262\",\n  \"content\": \"awsui_content_1d2i7_k6v6r_281\",\n  \"no-paddings\": \"awsui_no-paddings_1d2i7_k6v6r_284\",\n  \"header\": \"awsui_header_1d2i7_k6v6r_288\",\n  \"header--text\": \"awsui_header--text_1d2i7_k6v6r_295\",\n  \"footer\": \"awsui_footer_1d2i7_k6v6r_299\",\n  \"footer--stuck\": \"awsui_footer--stuck_1d2i7_k6v6r_307\",\n  \"dismiss-control\": \"awsui_dismiss-control_1d2i7_k6v6r_316\",\n  \"modal-open\": \"awsui_modal-open_1d2i7_k6v6r_320\"\n};\n  ", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport styles from './styles.css.js';\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\n\nlet initialBodyPaddingRightStyle: string | undefined = undefined;\n\nexport function disableBodyScrolling() {\n  setBodyScrollbarPadding();\n  document.body.classList.add(styles['modal-open']);\n}\n\nexport function enableBodyScrolling() {\n  document.body.classList.remove(styles['modal-open']);\n  restoreBodyScrollbarPadding();\n}\n\nfunction setBodyScrollbarPadding() {\n  if (bodyHasScrollbar()) {\n    initialBodyPaddingRightStyle = document.body.style.paddingRight;\n    const initialBodyPaddingRight = computedBodyPaddingRightPixels();\n    const scrollbarWidth = browserScrollbarSize().width;\n    const newBodyPaddingRight = initialBodyPaddingRight + scrollbarWidth;\n    document.body.style.paddingRight = newBodyPaddingRight + 'px';\n  }\n}\n\nfunction computedBodyPaddingRightPixels() {\n  return parseInt(window.getComputedStyle(document.body).paddingRight, 10);\n}\n\nfunction restoreBodyScrollbarPadding() {\n  if (initialBodyPaddingRightStyle) {\n    document.body.style.setProperty('padding-right', initialBodyPaddingRightStyle);\n  } else {\n    document.body.style.removeProperty('padding-right');\n  }\n  initialBodyPaddingRightStyle = undefined;\n}\n\nfunction bodyHasScrollbar() {\n  // Unfortunately this difference doesn't appear to match the scrollbar width during testing,\n  // otherwise we could remove browserScrollbarSize().  Bootstrap also doesn't use this difference\n  // directly.\n  return document.body.clientWidth < window.innerWidth;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { RefCallback, useCallback, useRef, useState } from 'react';\n\n/**\n * A hook that uses an Intersection Observer on the target element ref\n * and detects if the element is intersecting with its parent.\n */\nexport function useIntersectionObserver<T extends HTMLElement>() {\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const [isIntersecting, setIsIntersecting] = useState(false);\n\n  const ref = useCallback<RefCallback<T>>(targetElement => {\n    if (typeof IntersectionObserver === 'undefined') {\n      // Do nothing in environments like JSDOM\n      return;\n    }\n\n    if (observerRef.current) {\n      // Dismiss previous observer because the target changed\n      observerRef.current.disconnect();\n    }\n\n    // Create a new observer with the target element\n    if (targetElement) {\n      observerRef.current = new IntersectionObserver(([entry]) => setIsIntersecting(entry.isIntersecting));\n      observerRef.current.observe(targetElement);\n    }\n  }, []);\n\n  return { ref, isIntersecting };\n}\n"],
  "mappings": "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",
  "names": ["import_react", "React"]
}
