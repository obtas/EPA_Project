import {
  PopoverBody,
  PopoverContainer,
  internal_default as internal_default2,
  styles_css_default2 as styles_css_default
} from "./chunk-CNESFELA.js";
import {
  Portal
} from "./chunk-TM5SCOBX.js";
import {
  Transition
} from "./chunk-TWOQSS3Q.js";
import {
  InternalButton
} from "./chunk-46IS5YID.js";
import {
  useInternalI18n
} from "./chunk-VOJM65QS.js";
import {
  checkSafeUrl
} from "./chunk-SD4QTYOH.js";
import {
  useMobile
} from "./chunk-VAAYRRFE.js";
import {
  DATA_ATTR_FUNNEL_KEY,
  FUNNEL_KEY_FUNNEL_NAME
} from "./chunk-AX3SE4VV.js";
import {
  fireCancelableEvent,
  isPlainLeftClick
} from "./chunk-CTALK4OT.js";
import {
  internal_default
} from "./chunk-4FOLHITS.js";
import {
  __rest,
  applyDisplayName,
  clsx_m_default,
  getBaseProps,
  useBaseComponent
} from "./chunk-YXZ34YT5.js";
import {
  __toESM,
  require_react
} from "./chunk-C3URVCCN.js";

// node_modules/@cloudscape-design/components/breadcrumb-group/index.js
var import_react3 = __toESM(require_react());

// node_modules/@cloudscape-design/components/breadcrumb-group/internal.js
var import_react2 = __toESM(require_react());

// node_modules/@cloudscape-design/components/breadcrumb-group/styles.css.js
import "/local/home/samilafo/final_epa_project/QwizGuruPlatform/cloudscape/node_modules/@cloudscape-design/components/breadcrumb-group/styles.scoped.css";
var styles_css_default2 = {
  "breadcrumb-group": "awsui_breadcrumb-group_d19fg_tk7wt_93",
  "item": "awsui_item_d19fg_tk7wt_107",
  "breadcrumb-group-list": "awsui_breadcrumb-group-list_d19fg_tk7wt_120",
  "ellipsis": "awsui_ellipsis_d19fg_tk7wt_130",
  "icon": "awsui_icon_d19fg_tk7wt_138",
  "mobile": "awsui_mobile_d19fg_tk7wt_142",
  "mobile-short": "awsui_mobile-short_d19fg_tk7wt_155"
};

// node_modules/@cloudscape-design/components/breadcrumb-group/item/item.js
var import_react = __toESM(require_react());

// node_modules/@cloudscape-design/components/breadcrumb-group/item/styles.css.js
import "/local/home/samilafo/final_epa_project/QwizGuruPlatform/cloudscape/node_modules/@cloudscape-design/components/breadcrumb-group/item/styles.scoped.css";
var styles_css_default3 = {
  "link": "awsui_link_1kosq_jwr49_93",
  "breadcrumb": "awsui_breadcrumb_1kosq_jwr49_97",
  "icon": "awsui_icon_1kosq_jwr49_100",
  "anchor": "awsui_anchor_1kosq_jwr49_104",
  "last": "awsui_last_1kosq_jwr49_147",
  "compressed": "awsui_compressed_1kosq_jwr49_157",
  "text": "awsui_text_1kosq_jwr49_161",
  "virtual-item": "awsui_virtual-item_1kosq_jwr49_168",
  "item-popover": "awsui_item-popover_1kosq_jwr49_175"
};

// node_modules/@cloudscape-design/components/breadcrumb-group/item/item.js
var BreadcrumbItemWithPopover = (_a) => {
  var { item, isLast, anchorAttributes } = _a, itemAttributes = __rest(_a, ["item", "isLast", "anchorAttributes"]);
  const [showPopover, setShowPopover] = (0, import_react.useState)(false);
  const textRef = (0, import_react.useRef)(null);
  const virtualTextRef = (0, import_react.useRef)(null);
  const isTruncated = (textRef2, virtualTextRef2) => {
    if (!textRef2 || !virtualTextRef2 || !textRef2.current || !virtualTextRef2.current) {
      return false;
    }
    const virtualTextWidth = virtualTextRef2.current.getBoundingClientRect().width;
    const textWidth = textRef2.current.getBoundingClientRect().width;
    if (virtualTextWidth > textWidth) {
      return true;
    }
    return false;
  };
  const popoverContent = import_react.default.createElement(
    Portal,
    null,
    import_react.default.createElement(
      "div",
      { className: styles_css_default3["item-popover"] },
      import_react.default.createElement(Transition, { in: true }, () => import_react.default.createElement(
        PopoverContainer,
        { trackRef: textRef, size: "small", fixedWidth: false, position: "bottom", arrow: (position) => import_react.default.createElement(
          "div",
          { className: clsx_m_default(styles_css_default.arrow, styles_css_default[`arrow-position-${position}`]) },
          import_react.default.createElement("div", { className: styles_css_default["arrow-outer"] }),
          import_react.default.createElement("div", { className: styles_css_default["arrow-inner"] })
        ) },
        import_react.default.createElement(PopoverBody, { dismissButton: false, dismissAriaLabel: void 0, onDismiss: () => {
        }, header: void 0 }, item.text)
      ))
    )
  );
  (0, import_react.useEffect)(() => {
    const onKeyDown = (event) => {
      if (event.key === "Escape") {
        setShowPopover(false);
      }
    };
    if (showPopover) {
      document.addEventListener("keydown", onKeyDown);
    }
    return () => {
      document.removeEventListener("keydown", onKeyDown);
    };
  }, [showPopover]);
  return import_react.default.createElement(
    import_react.default.Fragment,
    null,
    import_react.default.createElement(
      Item,
      Object.assign({ isLast }, itemAttributes, { onFocus: () => {
        isTruncated(textRef, virtualTextRef) && setShowPopover(true);
      }, onBlur: () => setShowPopover(false), onMouseEnter: () => {
        isTruncated(textRef, virtualTextRef) && setShowPopover(true);
      }, onMouseLeave: () => setShowPopover(false), anchorAttributes }),
      import_react.default.createElement("span", { className: styles_css_default3.text, ref: textRef }, item.text),
      import_react.default.createElement("span", { className: styles_css_default3["virtual-item"], ref: virtualTextRef }, item.text)
    ),
    showPopover && popoverContent
  );
};
var Item = (_a) => {
  var { anchorAttributes, dataAttributes, children, isLast } = _a, itemAttributes = __rest(_a, ["anchorAttributes", "dataAttributes", "children", "isLast"]);
  return isLast ? import_react.default.createElement("span", Object.assign({}, itemAttributes, dataAttributes), children) : import_react.default.createElement("a", Object.assign({}, itemAttributes, anchorAttributes, dataAttributes), children);
};
function BreadcrumbItem({ item, onClick, onFollow, isDisplayed, isLast = false, isCompressed = false }) {
  const preventDefault = (event) => event.preventDefault();
  const onClickHandler = (event) => {
    if (isPlainLeftClick(event)) {
      fireCancelableEvent(onFollow, getEventDetail(item), event);
    }
    fireCancelableEvent(onClick, getEventDetail(item), event);
  };
  const itemAttributes = {
    className: clsx_m_default(styles_css_default3.anchor, { [styles_css_default3.compressed]: isCompressed })
  };
  const anchorAttributes = {
    href: item.href || "#",
    onClick: isLast ? preventDefault : onClickHandler
  };
  const dataAttibutes = {};
  if (isLast) {
    dataAttibutes[DATA_ATTR_FUNNEL_KEY] = FUNNEL_KEY_FUNNEL_NAME;
  }
  return import_react.default.createElement(
    "div",
    { className: clsx_m_default(styles_css_default3.breadcrumb, isLast && styles_css_default3.last) },
    isDisplayed && isCompressed ? import_react.default.createElement(BreadcrumbItemWithPopover, Object.assign({ item, isLast, anchorAttributes }, itemAttributes)) : import_react.default.createElement(
      Item,
      Object.assign({ isLast, anchorAttributes }, itemAttributes, dataAttibutes),
      import_react.default.createElement("span", { className: styles_css_default3.text }, item.text)
    ),
    !isLast ? import_react.default.createElement(
      "span",
      { className: styles_css_default3.icon },
      import_react.default.createElement(internal_default, { name: "angle-right" })
    ) : null
  );
}

// node_modules/@cloudscape-design/components/breadcrumb-group/internal.js
var DEFAULT_EXPAND_ARIA_LABEL = "Show path";
var DropdownTrigger = (clickHandler, ref, isDisabled, isExpanded, ariaLabel) => {
  return import_react2.default.createElement(InternalButton, { disabled: isDisabled, onClick: (event) => {
    event.preventDefault();
    clickHandler();
  }, ref, ariaExpanded: isExpanded, "aria-haspopup": true, ariaLabel, variant: "breadcrumb-group", formAction: "none" }, "...");
};
var EllipsisDropdown = ({ ariaLabel, dropdownItems, onDropdownItemClick, onDropdownItemFollow }) => {
  var _a;
  const i18n = useInternalI18n("breadcrumb-group");
  return import_react2.default.createElement(
    "li",
    { className: styles_css_default2.ellipsis },
    import_react2.default.createElement(internal_default2, { ariaLabel: (_a = i18n("expandAriaLabel", ariaLabel)) !== null && _a !== void 0 ? _a : DEFAULT_EXPAND_ARIA_LABEL, items: dropdownItems, onItemClick: onDropdownItemClick, onItemFollow: onDropdownItemFollow, customTriggerBuilder: DropdownTrigger }),
    import_react2.default.createElement(
      "span",
      { className: styles_css_default2.icon },
      import_react2.default.createElement(internal_default, { name: "angle-right" })
    )
  );
};
var getEventDetail = (item) => ({
  item,
  text: item.text,
  href: item.href
});
function InternalBreadcrumbGroup(_a) {
  var { items = [], ariaLabel, expandAriaLabel, onClick, onFollow, __internalRootRef } = _a, props = __rest(_a, ["items", "ariaLabel", "expandAriaLabel", "onClick", "onFollow", "__internalRootRef"]);
  for (const item of items) {
    checkSafeUrl("BreadcrumbGroup", item.href);
  }
  const baseProps = getBaseProps(props);
  const isMobile = useMobile();
  let breadcrumbItems = items.map((item, index) => {
    return import_react2.default.createElement(
      "li",
      { className: styles_css_default2.item, key: index },
      import_react2.default.createElement(BreadcrumbItem, { item, onClick, onFollow, isCompressed: isMobile, isLast: index === items.length - 1, isDisplayed: !isMobile || index === items.length - 1 || index === 0 })
    );
  });
  const getEventItem = (e) => {
    const { id } = e.detail;
    return items[parseInt(id)];
  };
  if (breadcrumbItems.length >= 2) {
    const dropdownItems = items.slice(1, items.length - 1).map((item, index) => ({
      id: (index + 1).toString(),
      text: item.text,
      href: item.href || "#"
    }));
    breadcrumbItems = [
      breadcrumbItems[0],
      import_react2.default.createElement(EllipsisDropdown, { key: "ellipsis", ariaLabel: expandAriaLabel, dropdownItems, onDropdownItemClick: (e) => fireCancelableEvent(onClick, getEventDetail(getEventItem(e)), e), onDropdownItemFollow: (e) => fireCancelableEvent(onFollow, getEventDetail(getEventItem(e)), e) }),
      ...breadcrumbItems.slice(1)
    ];
  }
  return import_react2.default.createElement(
    "nav",
    Object.assign({}, baseProps, { className: clsx_m_default(styles_css_default2["breadcrumb-group"], isMobile && styles_css_default2.mobile, items.length <= 2 && styles_css_default2["mobile-short"], baseProps.className), "aria-label": ariaLabel || void 0, ref: __internalRootRef }),
    import_react2.default.createElement("ol", { className: styles_css_default2["breadcrumb-group-list"] }, breadcrumbItems)
  );
}

// node_modules/@cloudscape-design/components/breadcrumb-group/index.js
function BreadcrumbGroup(_a) {
  var { items = [] } = _a, props = __rest(_a, ["items"]);
  const baseComponentProps = useBaseComponent("BreadcrumbGroup");
  return import_react3.default.createElement(InternalBreadcrumbGroup, Object.assign({ items }, props, baseComponentProps));
}
applyDisplayName(BreadcrumbGroup, "BreadcrumbGroup");

export {
  InternalBreadcrumbGroup,
  BreadcrumbGroup
};
//# sourceMappingURL=chunk-SQ7M5CG3.js.map
